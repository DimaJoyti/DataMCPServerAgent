# üöÄ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω—É –æ–±—Ä–æ–±–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

## üìã –û–≥–ª—è–¥ —Å—Ç–≤–æ—Ä–µ–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏

–ú–∏ —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–∏–ª–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é, —è–∫–∞ –≤–∫–ª—é—á–∞—î:

### ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

1. **üìÑ –û–±—Ä–æ–±–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤**
   - –ü–∞—Ä—Å–µ—Ä–∏ –¥–ª—è PDF, DOCX, HTML, Markdown, TXT
   - –°–∏—Å—Ç–µ–º–∞ —á–∞–Ω–∫—ñ–Ω–≥—É –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è–º–∏
   - –ó–±–∞–≥–∞—á–µ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö
   - –ì–æ–ª–æ–≤–Ω–∏–π –ø—Ä–æ—Ü–µ—Å–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

2. **üî¢ –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è**
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ OpenAI, HuggingFace, Cloudflare AI
   - –ë–∞—Ç—á–µ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –∑ –∫–µ—à—É–≤–∞–Ω–Ω—è–º
   - –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

3. **üóÑÔ∏è –í–µ–∫—Ç–æ—Ä–Ω—ñ —Å—Ö–æ–≤–∏—â–∞**
   - –°—Ö–µ–º–∏ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
   - –ú–æ–¥–µ–ª—ñ –ø–æ—à—É–∫—É —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
   - –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –±–µ–∫–µ–Ω–¥—ñ–≤

4. **üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥–∏**
   - –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
   - –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
   - –¢–µ—Å—Ç–∏

## üõ†Ô∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–∑–æ–≤–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
uv pip install pydantic python-dotenv aiofiles httpx

# –û–±—Ä–æ–±–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
uv pip install PyPDF2 python-docx beautifulsoup4 markdown html2text
uv pip install python-magic chardet langdetect textstat

# –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
uv pip install sentence-transformers transformers torch
uv pip install openai  # –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è OpenAI

# –í–µ–∫—Ç–æ—Ä–Ω—ñ —Å—Ö–æ–≤–∏—â–∞ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
uv pip install chromadb faiss-cpu pinecone-client weaviate-client

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
uv pip install pytest pytest-asyncio
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env`:

```bash
# OpenAI (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
OPENAI_API_KEY=your_openai_api_key

# Cloudflare AI (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
CLOUDFLARE_ACCOUNT_ID=your_account_id
CLOUDFLARE_API_TOKEN=your_api_token

# –õ–æ–≥—É–≤–∞–Ω–Ω—è
LOG_LEVEL=INFO
```

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤

### 1. –ë–∞–∑–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥ –æ–±—Ä–æ–±–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

```bash
cd d:\AI\DataMCPServerAgent
python examples/document_processing_example.py
```

–¶–µ–π –ø—Ä–∏–∫–ª–∞–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î:
- –ü–∞—Ä—Å–∏–Ω–≥ —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- –ß–∞–Ω–∫—ñ–Ω–≥ —Ç–µ–∫—Å—Ç—É
- –ó–±–∞–≥–∞—á–µ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö
- –†—ñ–∑–Ω—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó –æ–±—Ä–æ–±–∫–∏

### 2. –ü–æ–≤–Ω–∏–π –ø–∞–π–ø–ª–∞–π–Ω –∑ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é

```bash
python examples/complete_pipeline_example.py
```

–¶–µ–π –ø—Ä–∏–∫–ª–∞–¥ –ø–æ–∫–∞–∑—É—î:
- –ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª –æ–±—Ä–æ–±–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—é –µ–º–±–µ–¥–∏–Ω–≥—ñ–≤
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
- –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### 3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

```bash
python -m pytest tests/test_document_pipeline.py -v
```

## üìñ –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```python
from src.data_pipeline.document_processing import DocumentProcessor

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞
processor = DocumentProcessor()

# –û–±—Ä–æ–±–∫–∞ —Ñ–∞–π–ª—É
result = processor.process_file("document.pdf")
print(f"–°—Ç–≤–æ—Ä–µ–Ω–æ {len(result.chunks)} —á–∞–Ω–∫—ñ–≤")

# –û–±—Ä–æ–±–∫–∞ —Ç–µ–∫—Å—Ç—É
result = processor.process_content(
    content="–í–∞—à —Ç–µ–∫—Å—Ç —Ç—É—Ç",
    document_id="test_doc"
)
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

```python
from src.data_pipeline.document_processing import (
    DocumentProcessingConfig, ChunkingConfig
)

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–∞–Ω–∫—ñ–Ω–≥—É
chunking_config = ChunkingConfig(
    chunk_size=512,
    chunk_overlap=50,
    strategy="text",
    preserve_sentences=True
)

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
config = DocumentProcessingConfig(
    chunking_config=chunking_config,
    enable_chunking=True,
    enable_metadata_enrichment=True
)

processor = DocumentProcessor(config)
```

### –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

```python
from src.data_pipeline.vectorization import (
    HuggingFaceEmbedder, EmbeddingConfig, BatchVectorProcessor
)

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –µ–º–±–µ–¥–µ—Ä–∞
embedding_config = EmbeddingConfig(
    model_name="all-MiniLM-L6-v2",
    model_provider="huggingface",
    embedding_dimension=384
)

embedder = HuggingFaceEmbedder(embedding_config)

# –ë–∞—Ç—á–µ–≤–∞ –æ–±—Ä–æ–±–∫–∞
batch_processor = BatchVectorProcessor(embedder)
results = batch_processor.process_texts(["—Ç–µ–∫—Å—Ç 1", "—Ç–µ–∫—Å—Ç 2"])
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤

```python
# –ó–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –±–∞—Ç—á—É
batch_config = BatchProcessingConfig(
    batch_size=64,  # –ó–±—ñ–ª—å—à–∏—Ç–∏ –¥–ª—è –∫—Ä–∞—â–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
    max_workers=4,  # –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞
    enable_caching=True  # –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
)

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–µ—à—É
cache_config = CacheConfig(
    backend="file",
    cache_dir="cache/embeddings",
    ttl=86400 * 7,  # 1 —Ç–∏–∂–¥–µ–Ω—å
    max_size=100000  # –ë—ñ–ª—å—à–∏–π —Ä–æ–∑–º—ñ—Ä –∫–µ—à—É
)
```

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —á–∞–Ω–∫—ñ–Ω–≥—É

```python
# –î–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
chunking_config = ChunkingConfig(
    chunk_size=1024,  # –ë—ñ–ª—å—à—ñ —á–∞–Ω–∫–∏
    chunk_overlap=100,
    preserve_sections=True  # –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
)

# –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ç–µ–∫—Å—Ç—ñ–≤
chunking_config = ChunkingConfig(
    chunk_size=256,  # –ú–µ–Ω—à—ñ —á–∞–Ω–∫–∏
    chunk_overlap=50,
    preserve_sentences=True
)
```

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –õ–æ–≥—É–≤–∞–Ω–Ω—è

```python
import logging

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

# –î–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
logging.getLogger('src.data_pipeline').setLevel(logging.DEBUG)
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

```python
# –ê–Ω–∞–ª—ñ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –æ–±—Ä–æ–±–∫–∏
result = processor.process_file("document.pdf")
print(f"–ß–∞—Å –æ–±—Ä–æ–±–∫–∏: {result.processing_time:.2f}s")
print(f"–ö—ñ–ª—å–∫—ñ—Å—Ç—å —á–∞–Ω–∫—ñ–≤: {len(result.chunks)}")
print(f"–°–µ—Ä–µ–¥–Ω—ñ–π —Ä–æ–∑–º—ñ—Ä —á–∞–Ω–∫—É: {sum(len(c.text) for c in result.chunks) / len(result.chunks):.0f}")

# –ê–Ω–∞–ª—ñ–∑ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
vector_result = batch_processor.process_chunks(result.chunks)
print(f"–ß–∞—Å –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó: {vector_result.total_time:.2f}s")
print(f"–®–≤–∏–¥–∫—ñ—Å—Ç—å: {vector_result.total_items / vector_result.total_time:.1f} –µ–ª–µ–º–µ–Ω—Ç—ñ–≤/—Å–µ–∫")
```

## üêõ –£—Å—É–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü–æ—à–∏—Ä–µ–Ω—ñ –ø–æ–º–∏–ª–∫–∏

1. **ImportError –¥–ª—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**
   ```bash
   # –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø–∞–∫–µ—Ç–∏
   uv pip install package_name
   ```

2. **–ü–æ–º–∏–ª–∫–∏ –∫–æ–¥—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤**
   ```python
   # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–¥—É–≤–∞–Ω–Ω—è
   config.parsing_config.encoding = None  # –ê–≤—Ç–æ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è
   ```

3. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø–∞–º'—è—Ç—Ç—é**
   ```python
   # –ó–º–µ–Ω—à—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä –±–∞—Ç—á—É
   config.batch_size = 16
   # –£–≤—ñ–º–∫–Ω—ñ—Ç—å –æ—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É
   config.clear_cache_interval = 500
   ```

### –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```python
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
embedder = HuggingFaceEmbedder(config)
print(f"Embedder –∑–¥–æ—Ä–æ–≤–∏–π: {embedder.health_check()}")

cache = VectorCache(cache_config)
print(f"Cache –∑–¥–æ—Ä–æ–≤–∏–π: {cache.health_check()}")
```

## üîÑ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –≤–µ–∫—Ç–æ—Ä–Ω–∏–º–∏ —Å—Ö–æ–≤–∏—â–∞–º–∏**
   - –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –±–µ–∫–µ–Ω–¥—ñ–≤ (Chroma, FAISS)
   - –°–∏—Å—Ç–µ–º–∞ –ø–æ—à—É–∫—É —Ç–∞ —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó

2. **–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ**
   - –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
   - –ü–æ–∫—Ä–∞—â–µ–Ω—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —á–∞–Ω–∫—ñ–Ω–≥—É
   - –ì—ñ–±—Ä–∏–¥–Ω–∏–π –ø–æ—à—É–∫

3. **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞
   - –†–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∞ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
   - –ö–µ—à—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

4. **–í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
   - API –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
   - –î–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
   - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ agent-ui

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫
2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –≤ `docs/`
4. –°—Ç–≤–æ—Ä—ñ—Ç—å issue –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –æ–ø–∏—Å–æ–º –ø—Ä–æ–±–ª–µ–º–∏

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!** üéâ

–í–∏ –º–æ–∂–µ—Ç–µ –ø–æ—á–∞—Ç–∏ –∑ –±–∞–∑–æ–≤–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ —Ç–∞ –ø–æ—Å—Ç—É–ø–æ–≤–æ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤–∞—à–∏—Ö –ø–æ—Ç—Ä–µ–±.
